# 仓库级 Git 代理说明

该仓库已在本地配置 Git HTTP/HTTPS 代理，目的用于让该仓库的 Git 网络请求通过本地代理转发（仅影响当前仓库，不影响全局或其他仓库）。

## 当前代理（仓库本地配置）
- HTTP 代理: http://127.0.0.1:7890
- HTTPS 代理: https://127.0.0.1:7890

配置命令（已执行）

```bash
# 在仓库根目录执行（已配置）
git config http.proxy  http://127.0.0.1:7890
git config https.proxy https://127.0.0.1:7890
```

配置位置

- 这些配置被写入本仓库的 `.git/config`（即 `repo/.git/config`），仅对该仓库生效。

## 测试代理是否生效

在仓库根运行：

```bash
git ls-remote origin
# 或
git fetch
```

根据你的代理类型和远端仓库，命令会通过代理发送网络请求。

## 撤销代理设置

如果要删除仓库级代理：

```bash
git config --unset http.proxy
git config --unset https.proxy
```

或直接编辑 `.git/config` 删除相应条目。

## 安全和注意事项

- 如果在代理 URL 中包含用户名和密码（例如 `http://user:pass@proxy:port`），这些信息会以明文形式写入 `.git/config`，不推荐长期保存。
- 如果你在生产/部署环境使用 `npm ci --production`，请注意 `devDependencies` 不会被安装，但这与 Git 代理无关，仅为之前遇到的 babel 解析问题提醒。
- 若需要 SSH 代理（通过 SOCKS 或 HTTP CONNECT），可以设置 `core.sshCommand`：

```bash
# 示例：使用 SOCKS5 代理
git config core.sshCommand "ssh -o ProxyCommand='nc -x 127.0.0.1:1080 %h %p'"
```

## 临时方式（不改配置）

只为一次命令使用代理：

```bash
# HTTP(S) 临时环境变量
HTTP_PROXY="http://127.0.0.1:7890" HTTPS_PROXY="https://127.0.0.1:7890" git fetch

# SSH 临时覆盖 GIT_SSH_COMMAND
GIT_SSH_COMMAND="ssh -o ProxyCommand='nc -x 127.0.0.1:1080 %h %p'" git fetch
```
